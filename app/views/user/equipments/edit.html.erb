<%= render 'layouts/flash_message' %>
<div class="container-auto mx-5">
  <div class="row p-0">
    <div class="col-lg-12 mx-auto">
      <h3 class="border-box py-4">機器詳細編集</h3>
    </div>
  </div>
  <div class="row p-0">
    <div class="col-lg-12">
      <%= form_with model: @equipment, url: user_register_equipment_path(@register_id, @equipment), method: :patch do |f| %>
      <%= render 'user/equipments/validation_error' %>
      <div class="row">
        <div class="col-lg-4 offset-1">
          <div>
            <%= image_tag @equipment.get_image(250,250) %>
            <%= f.file_field :image, accept: "image/*", class: "pt-1" %>
          </div>
        </div>
        <div class="col-lg-7">
          <div class="row pb-1">
            <div class="col-lg-3">管理番号</div>
            <div class="col-lg-5">
              <%= f.text_field :reference_number, style: 'width: 300px;' %>
              <div>
                <% @equipment.errors.full_messages_for(:reference_number).each do |message| %>
                <div class="error_message">※ <%= message %></div>
                <% end %>
              </div>
            </div>
          </div>
          <div class="row pb-1">
            <div class="col-lg-3">系統</div>
            <div class="col-lg-5">
              <%= f.text_field :introduction, style: 'width: 300px;' %>
              <div>
                <% @equipment.errors.full_messages_for(:introduction).each do |message| %>
                <div class="error_message">※ <%= message %></div>
                <% end %>
            </div>
            </div>
          </div>
          <div class="row pb-1">
            <div class="col-lg-3">名称</div>
            <div class="col-lg-5">
              <%= f.text_field :name, style: 'width: 300px;' %>
              <div>
                <% @equipment.errors.full_messages_for(:name).each do |message| %>
                <div class="error_message">※ <%= message %></div>
                <% end %>
              </div>
            </div>
          </div>
          <div class="row pb-1">
            <div class="col-lg-3">型番</div>
            <div class="col-lg-5">
              <%= f.text_field :model, style: 'width: 300px;' %>
              <div>
                <% @equipment.errors.full_messages_for(:model).each do |message| %>
                <div class="error_message">※ <%= message %></div>
                <% end %>
              </div>
            </div>
          </div>
          <div class="row pb-1">
            <div class="col-lg-3">設置箇所</div>
            <div class="col-lg-5">
              <%= f.text_field :location, style: 'width: 300px;' %>
              <div>
                <% @equipment.errors.full_messages_for(:location).each do |message| %>
                <div class="error_message">※ <%= message %></div>
                <% end %>
              </div>
            </div>
          </div>
          <div class="row pb-1">
            <div class="col-lg-3">製造年月日</div>
            <div class="col-lg-5">
              <%= f.date_field :date, style: 'width: 200px;' %>
              <div>
                <% @equipment.errors.full_messages_for(:date).each do |message| %>
                <div class="error_message">※ <%= message %></div>
                <% end %>
              </div>
            </div>
          </div>
          <div class="row pb-1">
            <div class="col-lg-3">登録/削除</div>
            <div class="col-lg-5">
              <%= f.select :is_deleted, options_for_select([[ '登録', false ], [ '削除', true ]]), {}, class: 'form-control-sm' %>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-3 offset-1">
        <div class="col-lg-12">備考</div>
        <div class="col-lg-12 p-2"><%= f.text_area :notes, style: 'width: 910px; height: 80px;'  %></div>
      </div>
      <!--楽観的ロック-->
      <%= f.hidden_field :lock_version%>
      <div class="row pt-4">
        <div class="mx-auto">
          <div class="row">
            <div class="col"><%= link_to "戻る", user_register_equipment_path(@register_id,@equipment), class: 'btn btn-primary' %></div>
            <div class="col"><%= f.submit "変更を保存", class: 'btn btn-success' %></div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>